{% extends 'base.html' %} {% block title %}{{ story.title }} - Statistics{%endblock %} {% block content %}
<div class="card">
  <h1>{{ story.title }}</h1>
  <p class="description">
    {{ story.description|default:"No description provided." }}
  </p>

  <hr />

  <h3>Story Statistics</h3>
  <p><strong>Total Plays:</strong> {{ total_plays|default:0 }}</p>

  {% if endings_stats %}
  <h4>Ending Distribution</h4>
  <table class="stats-table">
    <thead>
      <tr>
        <th>Ending Name / Label</th>
        <th>Times Reached</th>
      </tr>
    </thead>
    <tbody>
      {% for ending in endings_stats %}
      <tr>
        <td>{{ ending.ending_label|default:ending.ending_page_id }}</td>
        <td>{{ ending.count }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p><em>No play data available for this story yet.</em></p>
  {% endif %}

  <div class="action-buttons" style="margin-top: 2rem">
    <a href="{% url 'play_story' story.id %}" class="btn btn-success"
      >Play This Story</a
    >
    <a href="{% url 'story_list' %}" class="btn">Back to Stories</a>
  </div>
</div>
{% endblock %}
